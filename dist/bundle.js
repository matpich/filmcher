(()=>{var e={180:()=>{const e=e=>{document.querySelectorAll(e).forEach((e=>{e.style.height=`${e.offsetWidth}px`}))},t=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e);window.addEventListener("load",(()=>{[[`${t(5,9)}%`,`${t(22,28)}%`,`${t(7,13)}%`],[`${t(36,42)}%`,`${t(43,49)}%`,`${t(5,9)}%`],[`${t(70,76)}%`,`${t(66,72)}%`,`${t(12,18)}%`],[`${t(48,56)}%`,`${t(85,95)}%`,`${t(3,8)}%`],[`${t(10,18)}%`,`${t(60,70)}%`,`${t(5,15)}%`],[`${t(71,81)}%`,`${t(7,14)}%`,`${t(8,17)}%`],[`${t(50,63)}%`,`${t(25,35)}%`,`${t(13,25)}%`]].forEach((([e,t,n])=>{let i=document.createElement("div");i.className="bckg-box",i.style.left=e,i.style.top=t,i.style.width=n,document.querySelector("#bckg-container").appendChild(i)})),e(".bckg-box")})),window.addEventListener("resize",(()=>e(".bckg-box")))}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}(()=>{"use strict";n(180);class e{constructor(){this.totalPages=null,this.currentPage=1,this.pagesAll=[]}slicer(){if(0==this.pagesAll.length)for(let e=1;e<=this.totalPages;e++)this.pagesAll.push(e);return this.totalPages<=9?this.pagesAll:this.totalPages>=10&&this.currentPage<5?this.pagesAll.slice(0,9):this.totalPages-this.currentPage>=4?this.pagesAll.slice(this.currentPage-5,this.currentPage+4):(console.log(this.pagesAll.slice(-9)),this.pagesAll.slice(-9))}displayer(e){let t=this.slicer(),n=document.querySelector(".pagination-container");document.querySelectorAll(".single-page").forEach((e=>e.remove())),t.forEach((e=>{let t=document.createElement("div");t.appendChild(document.createTextNode(e)),t.className="single-page",t.setAttribute("data-page-number",e),e==this.currentPage&&(t.className+=" current"),n.appendChild(t)}));let i=document.createElement("div");i.appendChild(document.createTextNode("<<")),i.className="single-page",i.setAttribute("data-page-number","left");let s=document.createElement("div");s.appendChild(document.createTextNode(">>")),s.className="single-page",s.setAttribute("data-page-number","right"),n.insertBefore(i,n.firstChild),n.appendChild(s),n.addEventListener("click",(t=>{let n=t.target.dataset.pageNumber;null!=n&&("left"==n&&this.currentPage>1?(this.currentPage--,e.search()):"right"==n&&this.currentPage<this.totalPages?(this.currentPage++,e.search()):(this.currentPage=Number(n),e.search()))}));let a=n.cloneNode(!0);a.addEventListener("click",(t=>{let n=t.target.dataset.pageNumber;null!=n&&("left"==n&&this.currentPage>1?(this.currentPage--,e.search()):"right"==n&&this.currentPage<this.totalPages?(this.currentPage++,e.search()):(this.currentPage=Number(n),e.search()))})),document.body.appendChild(a)}}const t=JSON.parse('{"z":"http://www.omdbapi.com/","$":"58b32334"}');class i{constructor(e){this.OMDB_API=t.z,this.API_KEY=t.$,this.imdbID=e,this.getMovieDetails()}getMovieDetails(){fetch(`${this.OMDB_API}?apikey=${this.API_KEY}&i=${this.imdbID}`).then((e=>e.json())).then((e=>{console.log(e),this.display(e)}))}display(e){console.log("movieDisplay!");let t=document.createElement("div");t.className="movie-desc-background",document.body.appendChild(t);let n=document.createElement("div");n.className="movie-desc-frame",n.innerHTML=`\n            <div>\n                <img src='${this.notAvailableHandler(e.Poster,"poster")}'>\n            </div>\n            <div>\n                <div>\n                    <h2>${e.Title}</h2>\n                    <p>${this.notAvailableHandler(e.Plot,"description")}</p>\n                </div>\n\n                <ul>\n                    <li><span>Released</span> ${e.Released}</li>\n                    <li><span>Genre</span> ${e.Genre}</li>\n                    <li><span>Director</span> ${e.Director}</li>\n                    <li><span>Writer</span> ${e.Writer}</li>\n                    <li><span>Actors</span> ${e.Actors}</li>\n                    <li><span>Country</span> ${e.Country}</li>\n                </ul>\n\n                <div id="movie-desc-rating">\n                    <div>\n                        <span>Rating</span><p>${e.imdbRating}</p>\n                    </div>\n                    <div>\n                        <span>Votes</span><p>${e.imdbVotes}</p>\n                    </div>\n                </div>\n            </div>`;let i=document.createElement("div");i.setAttribute("id","movie-desc-close"),i.innerHTML="CLOSE",t.appendChild(i),t.appendChild(n),document.querySelector("#movie-desc-close").addEventListener("click",this.remove)}remove(){let e=document.querySelector(".movie-desc-background");console.log(e),document.body.removeChild(e),document.body.style.overflow="scroll"}notAvailableHandler(e,t){if("N/A"!==e)return e;switch(t){case"description":return"Description not available. We're sorry.";case"poster":return"./image/N_A.jpg"}}}class s{constructor(n){this.OMDB_API=t.z,this.API_KEY=t.$,this.searchQuery=n,this.pagination=new e}singleMovie(e,t){for(let n of e.Search){let e=document.createElement("div");e.className="single-res";let s=document.createElement("img");"N/A"==n.Poster?s.src="./image/N_A.jpg":s.src=n.Poster,s.className="res-image";let a=document.createElement("div");a.className="res-desc";let r=document.createElement("h2");r.innerText=n.Title;let l=document.createElement("h3");l.innerText=n.Year;let o=document.createElement("p");o.innerText=n.Type,a.append(r,l,o),e.addEventListener("click",(()=>{new i(n.imdbID),document.body.style.overflow="hidden"})),e.append(s,a),t.appendChild(e)}}multiMovies(){let e=document.querySelectorAll(".multi-res, .pagination-container");e&&e.forEach((e=>document.body.removeChild(e)));let t=document.createElement("div");t.className="pagination-container",document.body.appendChild(t);let n=document.createElement("div");return n.className="multi-res",document.body.appendChild(n),n}search(){let e=this.multiMovies();if(!this.searchQuery){let t=document.createElement("h2");return t.className="error-msg-res",t.innerText="Search field is empty!",void e.appendChild(t)}fetch(`${this.OMDB_API}?apikey=${this.API_KEY}&s=${this.searchQuery}&page=${this.pagination.currentPage}`).then((e=>e.json())).then((t=>{if("False"===t.Response){let n=document.createElement("h2");return n.className="error-msg-res",n.innerText=t.Error,void e.appendChild(n)}this.pagination.totalPages=Math.ceil(t.totalResults/10),this.pagination.displayer(this),this.singleMovie(t,e),window.scrollTo(0,0)}))}}document.getElementById("search-form").addEventListener("submit",(e=>{e.preventDefault();let t=document.getElementById("search-field").value;new s(t).search()})),document.querySelector(".page-title").addEventListener("click",(()=>window.location.reload()))})()})();